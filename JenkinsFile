pipeline {
    agent any
    stages {
        stage ('Run Load Test using Taurus') {
            steps {
            parameters {
                    string(name: 'duration', defaultValue: '100')
                    string(name: 'users', defaultValue: '10')
                    string(name: 'rampUp', defaultValue: '2')
                }
                echo 'Starting test with Taurus'
                echo "duration, ${duration}, users, ${users}, rampUp, ${rampUp}."
                sh 'bzt stuff.yml         \
                      -o execution.0.ramp-up=%rampUp%      \
                      -o execution.0.concurrency=%users%   \
                      -o execution.0.hold-for=%duration%   \
                      -report'
                echo 'Testddsada completed'
            }
        }
    }
}
